!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ecommerce=e()}(this,(function(){"use strict";class t{toCart(t){const e=t.order.items.map(this.toCartItem),r=e.reduce(((t,e)=>t+e.quantity),0);return{cartId:t.cartId,items:e,productsQuantity:r}}toCartItem(t){return{product:{id:t.productId,sku:t.sku,name:t.name,price:t.price},quantity:t.quantity}}}class e{constructor(e,r){this.DEFAULT_STORE_LOCATION_PATH="store",this.localStorageCartKey=this.getCartKey(e),this.defaultStoreLocationPath=r?this.unifyStoreLocationPath(r):this.DEFAULT_STORE_LOCATION_PATH,this.cartConverter=new t}get(){if("undefined"==typeof window||!window||!window.localStorage)return this.createEmptyCartPromise();const t=window.localStorage.getItem(this.localStorageCartKey);if(null==t)return this.createEmptyCartPromise();const e=JSON.parse(t),r=this.cartConverter.toCart(e);return this.createCartPromise(r)}goToCheckout(t){if("undefined"==typeof window||!window||!window.location)return;const e=t?this.unifyStoreLocationPath(t):this.defaultStoreLocationPath;window.location.href=`${window.location.origin}/${e}#!/~/cart`}unifyStoreLocationPath(t){return t.replace(/(^\/)|(\/$)/g,"")}getCartKey(t){return`PSecwid__${t}PScart`}createCartPromise(t){return Promise.resolve(t)}createEmptyCartPromise(){return this.createCartPromise({})}}return class{constructor(t){this.cart=new e(t.storeId,t.storeLocationPath)}}}));